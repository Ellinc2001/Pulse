<div class="xp-lightning-container">
  <svg 
    *ngFor="let lightning of lightnings"
    class="lightning-bolt"
    [style.left.px]="lightning.startX"
    [style.top.px]="lightning.startY"
    [style.--lightning-dx.px]="lightning.endX - lightning.startX"
    [style.--lightning-dy.px]="lightning.endY - lightning.startY"
    [style.--lightning-hue]="lightning.hue"
    [style.animation-delay.ms]="lightning.delay"
    width="30"
    height="45"
    viewBox="0 0 32 48"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    preserveAspectRatio="xMidYMid meet">
    <defs>
      <filter [id]="'glow-' + lightning.id" x="-200%" y="-200%" width="500%" height="500%" filterUnits="objectBoundingBox">
        <feGaussianBlur stdDeviation="2" result="blur1"/>
        <feGaussianBlur stdDeviation="5" result="blur2"/>
        <feGaussianBlur stdDeviation="10" result="blur3"/>
        <feMerge>
          <feMergeNode in="blur3"/>
          <feMergeNode in="blur2"/>
          <feMergeNode in="blur1"/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
      
      <!-- Removed white from gradient, now only colored gradient -->
      <linearGradient [id]="'lightning-gradient-' + lightning.id" x1="0%" y1="0%" x2="0%" y2="100%">
        <stop offset="0%" stop-color="#F043D5" stop-opacity="1"/>
        <stop offset="50%" stop-color="#8A3FF1" stop-opacity="1"/>
        <stop offset="100%" stop-color="#3BE3FF" stop-opacity="1"/>
      </linearGradient>
    </defs>
    
    <path 
      [attr.d]="lightning.pathData"
      [attr.stroke]="'url(#lightning-gradient-' + lightning.id + ')'"
      fill="none"
      stroke-width="1.5"
      stroke-linecap="square"
      stroke-linejoin="miter"
      [attr.filter]="'url(#glow-' + lightning.id + ')'"
      opacity="1"/>
  </svg>
</div>
