/* === Variabili tema (scoped al componente) === */
:host {
  --primary-color: #A020F0;
  --viola-fluo: #A020F0;
  --inactive-color: #bb9bb3;
  --card-bg: #271B24;
  --card-border: rgba(160, 32, 240, 0.2);
  --glow-shadow: 0 0 15px rgba(160, 32, 240, 0.6), 0 0 5px rgba(160, 32, 240, 0.8);
  --text-glow: 0 0 8px rgba(160, 32, 240, 0.7);
}

/* sostituisci il blocco del container con questo */
.preferences-detail-container {
  font-family: 'Space Grotesk', sans-serif;
  background-color: #181116;
  color: #EAE0E5;

  /* üëá chiave: il container √® il viewport e gestisce lo scroll */
  height: 100dvh;             /* oppure 100vh se preferisci */
  overflow-y: auto;
  -webkit-overflow-scrolling: touch; /* inerzia su iOS */

  padding: 16px;
  padding-bottom: 16px;
}


/* === Header === */
.header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 24px; text-align: center;

  .back-btn {
    background: none; border: 0; cursor: pointer;
    color: var(--primary-color); font-size: 24px; text-shadow: var(--text-glow);
  }
  .header-title {
    color: #fff; font-weight: 700; letter-spacing: .05em;
    line-height: 1.1; font-size: 22px;
  }
  .header-spacer { width: 32px; }
}

/* === Layout === */
.main-content { display: flex; flex-direction: column; gap: 16px; }

/* === Card === */
.card {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 16px;
  padding: 16px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
}
.card-title {
  display: flex; align-items: center; gap: 8px;
  font-size: 1.1rem; font-weight: 700;
  color: var(--primary-color); text-shadow: var(--text-glow);
  margin-bottom: 16px;
  .material-symbols-outlined { font-size: 18px; }
}

.section-group { margin-bottom: 16px; &:last-child { margin-bottom: 0; } }
.label { font-size: .9rem; font-weight: 500; margin-bottom: 8px; display: block; color: #EAE0E5; }

/* === Chips / tag === */
.chips-container { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }
.chip {
  display: inline-flex; align-items: center; gap: 6px;
  background: rgba(160,32,240,.1);
  border: 1px solid rgba(160,32,240,.5);
  color: var(--inactive-color);
  padding: 6px 14px; border-radius: 9999px;
  font-size: .8rem; font-weight: 500; cursor: pointer;
  transition: all .2s ease-in-out;
  &:hover { background: rgba(160,32,240,.2); color:#fff; }
  &.active { background: var(--primary-color); color:#fff; border-color: var(--primary-color); box-shadow: var(--glow-shadow); }
  .drag-handle { color: rgba(255,255,255,.7); font-size: 1rem; cursor: move; }
}
.chip-eq { opacity: .7; padding-left: 2px; }

.add-tag-container { position: relative; width: 100%; margin-top: 8px; }
.add-tag-input {
  width: 100%; background:#181116; border:1px solid var(--card-border); border-radius: 9999px;
  padding: 8px 40px 8px 14px; color:#fff; font-size:.875rem;
  &::placeholder { color:#6b7280; }
  &:focus { outline:none; border-color: var(--primary-color); box-shadow: 0 0 0 1px var(--primary-color); }
}
.add-tag-btn { position:absolute; right:8px; top:50%; transform: translateY(-50%); background:none; border:0; color:var(--primary-color); font-size:22px; cursor:pointer; }

/* === Slider === */
.slider-group { margin-bottom: 16px; }
.slider-label-row { display:flex; justify-content: space-between; align-items:center; margin-bottom: 6px; }
.slider-value { font-size:.875rem; font-weight:700; color: var(--primary-color); min-width: 48px; text-align: right; }

.slider {
  -webkit-appearance: none; width: 100%; background: transparent;
  filter: drop-shadow(0 0 6px rgba(160,32,240,.35));
  &::-webkit-slider-runnable-track { height: 4px; border-radius: 9999px; background: rgba(160,32,240,.2); }
  &::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: var(--primary-color); margin-top: -6px; box-shadow: var(--glow-shadow); }
  &::-moz-range-track { height: 4px; border-radius: 9999px; background: rgba(160,32,240,.2); border: none; }
  &::-moz-range-thumb { height: 16px; width: 16px; border-radius: 50%; background: var(--primary-color); border: none; box-shadow: var(--glow-shadow); }
}

/* === Ricerca artisti === */
.artist-search-container { display: flex; flex-direction: column; gap: 8px; }
.artist-search-row { display:flex; align-items:center; justify-content:space-between; background: rgba(0,0,0,.2); padding: 8px; border-radius: 10px; }
.artist-type { font-size:.875rem; min-width: 64px; &.followed { color:#10b981; } &.hidden { color:#ef4444; } }
.search-input-container { position: relative; width: 66.6667%; }
.search-input {
  width:100%; background:#181116; border:1px solid var(--card-border); border-radius:9999px;
  padding: 6px 28px 6px 12px; color:#fff; font-size:.75rem;
  &::placeholder { color:#6b7280; }
  &:focus { outline:none; border-color: var(--primary-color); }
}
.search-icon { position:absolute; right:8px; top:50%; transform: translateY(-50%); color:#6b7280; }

/* === Segment control === */
.segment-control { display:flex; border-radius: 6px; overflow: hidden; }
.segment-control.small-text .segment-btn { font-size:.75rem; }
.segment-btn {
  background: rgba(160,32,240,.1); border: 1px solid rgba(160,32,240,.3);
  color: var(--inactive-color); padding: 10px 12px; flex: 1; text-align: center; cursor: pointer; transition: .2s;
  &:first-child { border-top-left-radius: 6px; border-bottom-left-radius: 6px; }
  &:last-child  { border-top-right-radius: 6px; border-bottom-right-radius: 6px; }
  &.active { background: var(--primary-color); color: #fff; box-shadow: var(--glow-shadow); }
}

/* === Toggle === */
.toggles-col { display: flex; flex-direction: column; gap: 12px; }
.toggle-row { display:flex; align-items:center; justify-content:space-between; }
.toggle-label { font-weight: 500; color: #d1d5db; font-size: .875rem; }

.toggle-switch {
  display:flex; align-items:center; cursor:pointer;
  input {
    position:absolute; opacity:0; pointer-events:none;
    &:checked + .toggle-bg {
      background: var(--primary-color); box-shadow: var(--glow-shadow);
      &::after { transform: translateX(20px); }
    }
  }
}
.toggle-bg {
  position:relative; width: 44px; height: 24px; background:#6b7280; border-radius:9999px; transition:.3s;
  &::after { content:''; position:absolute; top:2px; left:2px; width:20px; height:20px; background:#fff; border-radius:9999px; transition: transform .3s; }
}

/* === Time input === */
.time-input-group { margin-bottom: 14px; &:last-child { margin-bottom: 0; } }
.time-input-header { display:flex; justify-content: space-between; align-items:center; margin-bottom: 6px; }
.time-input {
  width:100%; background:#181116; border:1px solid var(--card-border); border-radius:10px;
  padding: 10px 12px; color:#fff; font-size:.875rem;
  &:focus { outline:none; border-color: var(--primary-color); box-shadow: 0 0 0 1px var(--primary-color); }
}

/* === CTA (dentro la prima card) === */
.save-button.in-card {
  width: 100%; margin-top: 12px;
  background: var(--viola-fluo); color: #fff; font-weight: 700;
  padding: 16px; border-radius: 9999px; font-size: 18px; border: none; cursor: pointer;
  box-shadow: var(--glow-shadow);
  transition: transform .15s ease;
  &:active { transform: scale(.96); }
}

/* Material Symbols weight sottile come nel mock */
.material-symbols-outlined {
  font-variation-settings: 'FILL' 0, 'wght' 300, 'GRAD' 0, 'opsz' 24;
}

:host {
  /* distanza ‚Äúpochi pixel‚Äù sopra il tab */
  --floating-gap: 6px;
  /* altezza del tab-bar: scegli UNA delle due righe sotto */
  --tabbar-h: 1dvh;   /* se vuoi mantenerla proporzionale (equivalente al tuo 8%) */
  /* --tabbar-h: 64px;*/ /* se preferisci un‚Äôaltezza fissa */
  --cta-h: 56px;       /* altezza pulsante stimata per il padding-bottom */
}

/* fai scrollare il contenuto e lascia spazio all‚Äôoverlay del bottone + tab */
.preferences-detail-container{
  height: 100dvh;
  overflow: auto;
  -webkit-overflow-scrolling: touch;

  /* spazio extra in fondo: tab + safe area + bottone + gap */
  padding-bottom: calc(var(--tabbar-h) + env(safe-area-inset-bottom) + var(--cta-h) + var(--floating-gap));
}

/* opzionale ma consigliato: usa var(--tabbar-h) anche sul componente tab per coerenza */
ion-tab-bar.tab-bar{
  height: var(--tabbar-h);
}

/* wrapper flottante (non blocca lo scroll) */
.floating-cta{
  position: fixed;
  left: 16px;
  right: 16px;
  bottom: calc(var(--tabbar-h) + env(safe-area-inset-bottom) + var(--floating-gap));
  z-index: 9999;

  display: flex;
  justify-content: center;

  pointer-events: none; /* il wrapper non cattura i click/scroll */
}

/* bottone (cattura i click) */
.floating-cta .save-button{
  pointer-events: auto;
  width: 100%;
  max-width: 640px;               /* opzionale */
  padding: 1rem;
  border-radius: 9999px;
  border: 1px solid rgba(127, 13, 242, .35);
  font-weight: 700;
  font-size: 1.125rem;

  /* colori & glow coerenti col tuo tab */
  background: var(--violet-500);
  color: #fff;
  box-shadow:
    0 0 15px rgba(127, 13, 242, 0.6),
    0 0 5px  rgba(127, 13, 242, 0.8);

  transition: transform .2s;
}
.floating-cta .save-button:active{ transform: scale(.96); }
