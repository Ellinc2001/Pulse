<!-- Adding proper container with scroll and mobile proportions -->
<div class="mypulse-container">
  <div class="mypulse-content">
    <header class="text-center mb-6">
      <h1 class="text-2xl font-bold tracking-wider mb-4">MyPulse</h1>
      <!-- Enhanced pulse score section with more attractive design -->
      <div class="pulse-score-card">
        <div class="pulse-score-header">
          <div class="pulse-icon">
            <div class="pulse-dot"></div>
            <div class="pulse-ring"></div>
            <div class="pulse-ring-2"></div>
          </div>
          <h2 class="pulse-score-title">Pulse Score</h2>
        </div>
        <p class="pulse-score-number">12,580</p>
        <div class="pulse-score-footer">
          <div class="heartbeat-line">
            <svg viewBox="0 0 200 40" class="heartbeat-svg">
              <!-- Base line always visible -->
              <path d="M0,20 L200,20" 
                    stroke="currentColor" 
                    stroke-width="5" 
                    fill="none" 
                    class="heartbeat-base-line"/>
              <!-- Moving zigzag pattern -->
              <path d="M0,20 L40,20 L45,10 L50,30 L55,5 L60,35 L65,20 L105,20" 
                    stroke="currentColor" 
                    stroke-width="5" 
                    fill="none" 
                    class="heartbeat-zigzag"/>
            </svg>
          </div>
        </div>
      </div>
    </header>

    <main class="main-content">
      <!-- Updated Event Countdowns section with new design and structure -->
      <div class="event-card">
        <div class="countdown-header">
          <ion-icon class="countdown-title-icon" name="hourglass-outline"></ion-icon>
          <h2 class="section-title">Countdown Eventi Prenotati</h2>
        </div>
        <div class="countdown-list">
          <div class="countdown-card">
            <div class="countdown-icon">
              <ion-icon class="event-icon" name="musical-notes"></ion-icon>
            </div>
            <div class="countdown-info">
              <p class="countdown-event-name">Cosmic Gate Concert</p>
              <p class="countdown-venue">Club XYZ</p>
            </div>
            <div class="countdown-badge">
              3 days
            </div>
          </div>
          <div class="countdown-divider"></div>
          <div class="countdown-card">
            <div class="countdown-icon">
              <ion-icon class="event-icon" name="headset"></ion-icon>
            </div>
            <div class="countdown-info">
              <p class="countdown-event-name">Techno Rave Night</p>
              <p class="countdown-venue">Warehouse District</p>
            </div>
            <div class="countdown-badge">
              1 week
            </div>
          </div>
          <div class="countdown-divider"></div>
          <div class="countdown-card">
            <div class="countdown-icon">
              <ion-icon class="event-icon" name="partly-sunny"></ion-icon>
            </div>
            <div class="countdown-info">
              <p class="countdown-event-name">Sunrise Afterparty</p>
              <p class="countdown-venue">Rooftop Bar</p>
            </div>
            <div class="countdown-badge-urgent">
              18 hours
            </div>
          </div>
        </div>
      </div>

      <!-- Spark section with proper toggle -->
      <div class="spark-card">
        <h2 class="section-title">Spark</h2>
        <div class="spark-toggle">
          <div class="spark-slider" [style.transform]="sparkTab === 'mine' ? 'translateX(100%)' : 'translateX(0)'"></div>
          <button class="spark-button" 
                  [class.active]="sparkTab === 'me'"
                  (click)="sparkTab = 'me'">
            Sparked Me ({{ sparkMeUsers.length }})
          </button>
          <button class="spark-button"
                  [class.active]="sparkTab === 'mine'"
                  (click)="sparkTab = 'mine'">
            My Sparks ({{ mySparkUsers.length }})
          </button>
        </div>
        <!-- Updated to iterate over sparkMeUsers array and pass user data to openUserProfile -->
        <div class="spark-content" *ngIf="sparkTab === 'me'">
          <p class="spark-description">Persone che hanno lasciato uno spark</p>
          <div class="spark-avatars">
            <div class="spark-avatar-item" 
                 *ngFor="let user of sparkMeUsers"
                 (click)="openUserProfile(user)">
              <img class="spark-avatar" [src]="user.avatarUrl" [alt]="user.name">
            </div>
          </div>
        </div>
        <!-- Updated to iterate over mySparkUsers array and pass user data to openUserProfile -->
        <div class="spark-content" *ngIf="sparkTab === 'mine'">
          <p class="spark-description">Persone ai quali hai lasciato uno spark</p>
          <div class="spark-avatars">
            <div class="spark-avatar-item" 
                 *ngFor="let user of mySparkUsers"
                 (click)="openUserProfile(user)">
              <img class="spark-avatar" [src]="user.avatarUrl" [alt]="user.name">
            </div>
          </div>
        </div>
      </div>

      <!-- Updated Invitations section with new design -->
      <div class="invitations-card">
        <h2 class="section-title">Sezione Inviti ({{ invites.length }})</h2>
        <div class="invitations-list">
          <!-- Fixed binding to pass entire invite object instead of individual properties -->
          <app-invite-card
            *ngFor="let invite of invites"
            [invite]="invite"
            (accept)="acceptInvite($event)"
            (decline)="declineInvite($event)"
          ></app-invite-card>
        </div>
      </div>
    </main>
  </div>
</div>
