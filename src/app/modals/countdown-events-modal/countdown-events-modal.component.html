<div class="modal-container">
  <!-- Background glow effects -->
  <div class="glow-effect glow-purple"></div>
  <div class="glow-effect glow-blue"></div>

  <!-- Header -->
  <header class="modal-header">
    <div class="header-top">
      <h1 class="modal-title">Eventi Prenotati</h1>
      <button class="close-button" (click)="dismiss()">
        <ion-icon name="close"></ion-icon>
      </button>
    </div>

    <!-- View Toggle -->
    <div class="view-toggle">
      <div class="toggle-indicator" [class.expanded]="viewMode === 'expanded'"></div>
      <button 
        class="toggle-btn" 
        [class.active]="viewMode === 'compact'"
        (click)="toggleView('compact')">
        Compatta
      </button>
      <button 
        class="toggle-btn" 
        [class.active]="viewMode === 'expanded'"
        (click)="toggleView('expanded')">
        Espansa
      </button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="events-content">
    <!-- Compact View (Grid 2x2 with split cards) -->
    <div class="compact-view" *ngIf="viewMode === 'compact'">
      <div 
        *ngFor="let event of events" 
        class="countdown-card-split-sm"
        (click)="openEventDetail(event.id)">
        <!-- Left side: Image with polygon clip -->
        <div class="countdown-image-half-sm">
          <div class="split-polygon-clip-sm">
            <img *ngIf="event.imageUrl" 
                 [src]="event.imageUrl" 
                 [alt]="event.name"
                 class="countdown-split-image-sm">
            <div *ngIf="!event.imageUrl" class="countdown-split-placeholder-sm">
              <ion-icon [name]="event.icon"></ion-icon>
            </div>
          </div>
          <div class="neon-divider-sm" [style.background]="'linear-gradient(to bottom, transparent, ' + (event.countdownColor || '#a855f7') + ', transparent)'"></div>
        </div>
        
        <!-- Right side: Content -->
        <div class="countdown-content-half-sm">
          <p class="countdown-venue-sm">{{ event.venue }}</p>
          <h3 class="countdown-title-sm">{{ event.name }}</h3>
          <div class="countdown-time-section-sm">
            <span class="countdown-label-sm">Starts In</span>
            <div class="countdown-value-row-sm">
              <span class="countdown-number-sm" [style.color]="event.countdownColor || '#a855f7'" [style.textShadow]="'0 0 12px ' + (event.countdownColor || '#a855f7')">{{ event.countdownNumber || '00' }}</span>
              <span class="countdown-unit-sm">{{ event.countdownUnit || 'DAYS' }}</span>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="events.length === 0" class="empty-state">
        <ion-icon name="calendar-outline"></ion-icon>
        <p>Nessun evento prenotato</p>
      </div>
    </div>

    <!-- Expanded View (full width split cards) -->
    <div class="expanded-view" *ngIf="viewMode === 'expanded'">
      <div 
        *ngFor="let event of events" 
        class="countdown-card-split"
        (click)="openEventDetail(event.id)">
        <!-- Left side: Image with polygon clip -->
        <div class="countdown-image-half">
          <div class="split-polygon-clip">
            <img *ngIf="event.imageUrl" 
                 [src]="event.imageUrl" 
                 [alt]="event.name"
                 class="countdown-split-image">
            <div *ngIf="!event.imageUrl" class="countdown-split-placeholder">
              <ion-icon [name]="event.icon"></ion-icon>
            </div>
          </div>
          <div class="neon-divider" [style.background]="'linear-gradient(to bottom, transparent, ' + (event.countdownColor || '#a855f7') + ', transparent)'"></div>
        </div>
        
        <!-- Right side: Content -->
        <div class="countdown-content-half">
          <p class="countdown-venue-small">{{ event.venue }}</p>
          <h3 class="countdown-title-split">{{ event.name }}</h3>
          <div class="countdown-time-section">
            <span class="countdown-label-small">Starts In</span>
            <div class="countdown-value-row">
              <span class="countdown-number-big" [style.color]="event.countdownColor || '#a855f7'" [style.textShadow]="'0 0 15px ' + (event.countdownColor || '#a855f7')">{{ event.countdownNumber || '00' }}</span>
              <span class="countdown-unit-small">{{ event.countdownUnit || 'DAYS' }}</span>
            </div>
          </div>
        </div>
        
        <!-- Arrow button -->
        <button class="countdown-arrow-btn">
          <ion-icon name="arrow-forward"></ion-icon>
        </button>
      </div>

      <div *ngIf="events.length === 0" class="empty-state">
        <ion-icon name="calendar-outline"></ion-icon>
        <p>Nessun evento prenotato</p>
      </div>
    </div>
  </main>

  <!-- Bottom bar indicator -->
  <div class="bottom-indicator"></div>
</div>
